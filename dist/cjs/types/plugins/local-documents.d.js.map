{"version":3,"file":"local-documents.d.js","names":[],"sources":["../../../../src/types/plugins/local-documents.d.ts"],"sourcesContent":["import type { Observable } from 'rxjs';\r\nimport type { DocumentCache } from '../../doc-cache.d.ts';\r\nimport type { IncrementalWriteQueue } from '../../incremental-write.d.ts';\r\nimport type { RxCollection } from '../rx-collection.d.ts';\r\nimport type { RxDatabase } from '../rx-database.d.ts';\r\nimport type { RxDocumentBase } from '../rx-document.d.ts';\r\nimport type { RxStorageInstance } from '../rx-storage.interface.d.ts';\r\nimport type { Override } from '../util.d.ts';\r\n\r\nexport type LocalDocumentParent = RxDatabase | RxCollection;\r\nexport type LocalDocumentState = {\r\n    database: RxDatabase;\r\n    parent: LocalDocumentParent;\r\n    storageInstance: RxStorageInstance<RxLocalDocumentData, any, any>;\r\n    docCache: DocumentCache<RxLocalDocumentData, {}>;\r\n    incrementalWriteQueue: IncrementalWriteQueue<RxLocalDocumentData>;\r\n};\r\nexport type RxLocalDocumentData<\r\n    Data = {\r\n        // local documents are schemaless and contain any data\r\n        [key: string]: any;\r\n    }\r\n> = {\r\n    id: string;\r\n    data: Data;\r\n};\r\n\r\ndeclare type LocalDocumentModifyFunction<Data> = (\r\n    doc: Data,\r\n    rxLocalDocument: RxLocalDocument<any, Data>\r\n) => Data | Promise<Data>;\r\n\r\n\r\nexport declare type RxLocalDocument<Parent, Data = any, Reactivity = unknown> = Override<\r\n    RxDocumentBase<RxLocalDocumentData<Data>, {}, Reactivity>,\r\n    {\r\n        readonly parent: Parent;\r\n        isLocal(): true;\r\n\r\n        /**\r\n             * Because local documents store their relevant data inside of the 'data' property,\r\n             * the incremental mutation methods are changed a bit to only allow to change parts of the data property.\r\n             */\r\n        incrementalModify(mutationFunction: LocalDocumentModifyFunction<Data>): Promise<RxLocalDocument<Parent, Data, Reactivity>>;\r\n        incrementalPatch(patch: Partial<Data>): Promise<RxLocalDocument<Parent, Data, Reactivity>>;\r\n\r\n        $: Observable<RxLocalDocument<Parent, Data, Reactivity>>;\r\n    }\r\n>;\r\n"],"mappings":"","ignoreList":[]}