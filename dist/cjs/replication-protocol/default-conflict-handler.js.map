{"version":3,"file":"default-conflict-handler.js","names":["_index","require","_rxStorageHelper","defaultConflictHandler","exports","isEqual","a","b","deepEqual","stripAttachmentsDataFromDocument","resolve","i","realMasterState"],"sources":["../../../src/replication-protocol/default-conflict-handler.ts"],"sourcesContent":["import {\r\n    deepEqual\r\n} from '../plugins/utils/index.ts';\r\nimport { stripAttachmentsDataFromDocument } from '../rx-storage-helper.ts';\r\nimport type { RxConflictHandler } from '../types';\r\n\r\nexport const defaultConflictHandler: RxConflictHandler<any> = {\r\n    isEqual(a, b) {\r\n        /**\r\n         * If the documents are deep equal,\r\n         * we have no conflict.\r\n         * On your custom conflict handler you might only\r\n         * check some properties, like the updatedAt time,\r\n         * for better performance, because deepEqual is expensive.\r\n         */\r\n        return deepEqual(\r\n            stripAttachmentsDataFromDocument(a),\r\n            stripAttachmentsDataFromDocument(b)\r\n        );\r\n    },\r\n    resolve(i) {\r\n        /**\r\n         * The default conflict handler will always\r\n         * drop the fork state and use the master state instead.\r\n         */\r\n        return i.realMasterState;\r\n    }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAGA,IAAAC,gBAAA,GAAAD,OAAA;AAGO,IAAME,sBAA8C,GAAAC,OAAA,CAAAD,sBAAA,GAAG;EAC1DE,OAAOA,CAACC,CAAC,EAAEC,CAAC,EAAE;IACV;AACR;AACA;AACA;AACA;AACA;AACA;IACQ,OAAO,IAAAC,gBAAS,EACZ,IAAAC,iDAAgC,EAACH,CAAC,CAAC,EACnC,IAAAG,iDAAgC,EAACF,CAAC,CACtC,CAAC;EACL,CAAC;EACDG,OAAOA,CAACC,CAAC,EAAE;IACP;AACR;AACA;AACA;IACQ,OAAOA,CAAC,CAACC,eAAe;EAC5B;AACJ,CAAC","ignoreList":[]}