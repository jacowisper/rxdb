{"version":3,"file":"utils-error.js","names":["_utilsString","require","pluginMissing","pluginKey","keyParts","split","pluginName","forEach","part","ucfirst","Error","errorToPlainJson","err","ret","name","message","rxdb","parameters","extensions","code","url","stack","undefined","replace"],"sources":["../../../../src/plugins/utils/utils-error.ts"],"sourcesContent":["import type {\r\n    PlainJsonError,\r\n    RxError,\r\n    RxTypeError\r\n} from '../../types/index.d.ts';\r\nimport { ucfirst } from './utils-string.ts';\r\n\r\n\r\n\r\n/**\r\n * Returns an error that indicates that a plugin is missing\r\n * We do not throw a RxError because this should not be handled\r\n * programmatically but by using the correct import\r\n */\r\nexport function pluginMissing(\r\n    pluginKey: string\r\n): Error {\r\n    const keyParts = pluginKey.split('-');\r\n    let pluginName = 'RxDB';\r\n    keyParts.forEach(part => {\r\n        pluginName += ucfirst(part);\r\n    });\r\n    pluginName += 'Plugin';\r\n    return new Error(\r\n        `You are using a function which must be overwritten by a plugin.\r\n        You should either prevent the usage of this function or add the plugin via:\r\n            import { ${pluginName} } from 'rxdb/plugins/${pluginKey}';\r\n            addRxPlugin(${pluginName});\r\n        `\r\n    );\r\n}\r\n\r\n\r\n\r\nexport function errorToPlainJson(err: Error | TypeError | RxError | RxTypeError): PlainJsonError {\r\n    const ret: PlainJsonError = {\r\n        name: err.name,\r\n        message: err.message,\r\n        rxdb: (err as any).rxdb,\r\n        parameters: (err as RxError).parameters,\r\n        extensions: (err as any).extensions,\r\n        code: (err as RxError).code,\r\n        url: (err as RxError).url,\r\n        /**\r\n         * stack must be last to make it easier to read the json in a console.\r\n         * Also we ensure that each linebreak is spaced so that the chrome devtools\r\n         * shows urls to the source code that can be clicked to inspect\r\n         * the correct place in the code.\r\n         */\r\n        stack: !err.stack ? undefined : err.stack.replace(/\\n/g, ' \\n ')\r\n    };\r\n    return ret;\r\n}\r\n"],"mappings":";;;;;;;AAKA,IAAAA,YAAA,GAAAC,OAAA;AAIA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CACzBC,SAAiB,EACZ;EACL,IAAMC,QAAQ,GAAGD,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC;EACrC,IAAIC,UAAU,GAAG,MAAM;EACvBF,QAAQ,CAACG,OAAO,CAACC,IAAI,IAAI;IACrBF,UAAU,IAAI,IAAAG,oBAAO,EAACD,IAAI,CAAC;EAC/B,CAAC,CAAC;EACFF,UAAU,IAAI,QAAQ;EACtB,OAAO,IAAII,KAAK,iLAGGJ,UAAU,8BAAyBH,SAAS,oCACzCG,UAAU,iBAEhC,CAAC;AACL;AAIO,SAASK,gBAAgBA,CAACC,GAA8C,EAAkB;EAC7F,IAAMC,GAAmB,GAAG;IACxBC,IAAI,EAAEF,GAAG,CAACE,IAAI;IACdC,OAAO,EAAEH,GAAG,CAACG,OAAO;IACpBC,IAAI,EAAGJ,GAAG,CAASI,IAAI;IACvBC,UAAU,EAAGL,GAAG,CAAaK,UAAU;IACvCC,UAAU,EAAGN,GAAG,CAASM,UAAU;IACnCC,IAAI,EAAGP,GAAG,CAAaO,IAAI;IAC3BC,GAAG,EAAGR,GAAG,CAAaQ,GAAG;IACzB;AACR;AACA;AACA;AACA;AACA;IACQC,KAAK,EAAE,CAACT,GAAG,CAACS,KAAK,GAAGC,SAAS,GAAGV,GAAG,CAACS,KAAK,CAACE,OAAO,CAAC,KAAK,EAAE,MAAM;EACnE,CAAC;EACD,OAAOV,GAAG;AACd","ignoreList":[]}