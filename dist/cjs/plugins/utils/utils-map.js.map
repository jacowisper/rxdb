{"version":3,"file":"utils-map.js","names":["getFromMapOrThrow","map","key","val","get","Error","getFromMapOrCreate","index","creator","ifWasThere","value","set"],"sources":["../../../../src/plugins/utils/utils-map.ts"],"sourcesContent":["export function getFromMapOrThrow<K, V>(map: Map<K, V> | WeakMap<any, V>, key: K): V {\r\n    const val = map.get(key);\r\n    if (typeof val === 'undefined') {\r\n        throw new Error('missing value from map ' + key);\r\n    }\r\n    return val;\r\n}\r\n\r\nexport function getFromMapOrCreate<MapIndex, MapValue>(\r\n    map: Map<MapIndex, MapValue> | WeakMap<any, MapValue>,\r\n    index: MapIndex,\r\n    creator: () => MapValue,\r\n    ifWasThere?: (value: MapValue) => void\r\n): MapValue {\r\n    let value = map.get(index);\r\n    if (typeof value === 'undefined') {\r\n        value = creator();\r\n        map.set(index, value);\r\n    } else if (ifWasThere) {\r\n        ifWasThere(value);\r\n    }\r\n    return value;\r\n}\r\n"],"mappings":";;;;;;;AAAO,SAASA,iBAAiBA,CAAOC,GAAgC,EAAEC,GAAM,EAAK;EACjF,IAAMC,GAAG,GAAGF,GAAG,CAACG,GAAG,CAACF,GAAG,CAAC;EACxB,IAAI,OAAOC,GAAG,KAAK,WAAW,EAAE;IAC5B,MAAM,IAAIE,KAAK,CAAC,yBAAyB,GAAGH,GAAG,CAAC;EACpD;EACA,OAAOC,GAAG;AACd;AAEO,SAASG,kBAAkBA,CAC9BL,GAAqD,EACrDM,KAAe,EACfC,OAAuB,EACvBC,UAAsC,EAC9B;EACR,IAAIC,KAAK,GAAGT,GAAG,CAACG,GAAG,CAACG,KAAK,CAAC;EAC1B,IAAI,OAAOG,KAAK,KAAK,WAAW,EAAE;IAC9BA,KAAK,GAAGF,OAAO,CAAC,CAAC;IACjBP,GAAG,CAACU,GAAG,CAACJ,KAAK,EAAEG,KAAK,CAAC;EACzB,CAAC,MAAM,IAAID,UAAU,EAAE;IACnBA,UAAU,CAACC,KAAK,CAAC;EACrB;EACA,OAAOA,KAAK;AAChB","ignoreList":[]}