{"version":3,"file":"index.js","names":["_localDocuments","require","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","_localDocumentsHelper","_rxLocalDocument","RxDBLocalDocumentsPlugin","name","rxdb","prototypes","RxCollection","proto","insertLocal","upsertLocal","getLocal","getLocal$","RxDatabase","hooks","createRxDatabase","before","args","creator","localDocuments","createLocalDocStateByParent","database","createRxCollection","collection","preCloseRxDatabase","after","db","closeStateByParent","postCloseRxCollection","postRemoveRxDatabase","removeLocalDocumentsStorageInstance","storage","databaseName","postRemoveRxCollection","collectionName","overwritable"],"sources":["../../../../src/plugins/local-documents/index.ts"],"sourcesContent":["import type {\r\n    RxPlugin\r\n} from '../../types/index.d.ts';\r\nimport {\r\n    getLocal,\r\n    getLocal$,\r\n    insertLocal,\r\n    upsertLocal\r\n} from './local-documents.ts';\r\nimport {\r\n    closeStateByParent,\r\n    createLocalDocStateByParent,\r\n    removeLocalDocumentsStorageInstance\r\n} from './local-documents-helper.ts';\r\n\r\nexport * from './local-documents-helper.ts';\r\nexport * from './local-documents.ts';\r\nexport * from './rx-local-document.ts';\r\nexport type {\r\n    LocalDocumentParent,\r\n    LocalDocumentState,\r\n    RxLocalDocument,\r\n    RxLocalDocumentData\r\n} from '../../types/plugins/local-documents.d.ts';\r\n\r\n\r\nexport const RxDBLocalDocumentsPlugin: RxPlugin = {\r\n    name: 'local-documents',\r\n    rxdb: true,\r\n    prototypes: {\r\n        RxCollection: (proto: any) => {\r\n            proto.insertLocal = insertLocal;\r\n            proto.upsertLocal = upsertLocal;\r\n            proto.getLocal = getLocal;\r\n            proto.getLocal$ = getLocal$;\r\n        },\r\n        RxDatabase: (proto: any) => {\r\n            proto.insertLocal = insertLocal;\r\n            proto.upsertLocal = upsertLocal;\r\n            proto.getLocal = getLocal;\r\n            proto.getLocal$ = getLocal$;\r\n        }\r\n    },\r\n    hooks: {\r\n        createRxDatabase: {\r\n            before: args => {\r\n                if (args.creator.localDocuments) {\r\n                    /**\r\n                     * We do not have to await\r\n                     * the creation to speed up initial page load.\r\n                     */\r\n                    /* await */ createLocalDocStateByParent(args.database);\r\n                }\r\n            }\r\n        },\r\n        createRxCollection: {\r\n            before: args => {\r\n                if (args.creator.localDocuments) {\r\n                    /**\r\n                     * We do not have to await\r\n                     * the creation to speed up initial page load.\r\n                     */\r\n                    /* await */ createLocalDocStateByParent(args.collection);\r\n                }\r\n            }\r\n        },\r\n        preCloseRxDatabase: {\r\n            after: db => {\r\n                return closeStateByParent(db);\r\n            }\r\n        },\r\n        postCloseRxCollection: {\r\n            after: collection => closeStateByParent(collection)\r\n        },\r\n        postRemoveRxDatabase: {\r\n            after: args => {\r\n                return removeLocalDocumentsStorageInstance(\r\n                    args.storage,\r\n                    args.databaseName,\r\n                    ''\r\n                );\r\n            }\r\n        },\r\n        postRemoveRxCollection: {\r\n            after: args => {\r\n                return removeLocalDocumentsStorageInstance(\r\n                    args.storage,\r\n                    args.databaseName,\r\n                    args.collectionName\r\n                );\r\n            }\r\n        }\r\n    },\r\n    overwritable: {}\r\n};\r\n"],"mappings":"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","ignoreList":[]}