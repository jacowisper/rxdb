{"version":3,"file":"nosql-query-builder.js","names":["_mqueryUtils","require","_rxError","NoSqlQueryBuilderClass","exports","mangoQuery","_path","options","_conditions","_fields","queryBuilder","selector","find","limit","skip","sort","forEach","s","_proto","prototype","where","_val","arguments","length","type","Array","isArray","merge","newRxTypeError","path","equals","val","_ensurePath","eq","or","array","$or","push","apply","nor","$nor","and","$and","mod","slice","conds","$mod","exists","$exists","elemMatch","_criteria","fn","criteria","isObject","$elemMatch","arg","len","i","_pushArr","split","field","ascend","substring","keys","Object","args","source","canMerge","_distinct","method","newRxError","toJSON","query","mQuerySortToRxDBSort","entries","map","k","v","direction","part","OTHER_MANGO_ATTRIBUTES","OTHER_MANGO_OPERATORS","$conditional","RegExp","$regex","$options","opts","value","$meta","String","toLowerCase","test","valueStr","toString","replace","parseInt","createQueryBuilder"],"sources":["../../../../../src/plugins/query-builder/mquery/nosql-query-builder.ts"],"sourcesContent":["/**\r\n * this is based on\r\n * @link https://github.com/aheckmann/mquery/blob/master/lib/mquery.js\r\n */\r\nimport {\r\n    isObject,\r\n    merge\r\n} from './mquery-utils.ts';\r\nimport {\r\n    newRxTypeError,\r\n    newRxError\r\n} from '../../../rx-error.ts';\r\nimport type {\r\n    MangoQuery,\r\n    MangoQuerySelector,\r\n    MangoQuerySortPart,\r\n    MangoQuerySortDirection\r\n} from '../../../types/index.d.ts';\r\n\r\n\r\ndeclare type MQueryOptions = {\r\n    limit?: number;\r\n    skip?: number;\r\n    sort?: any;\r\n};\r\n\r\nexport class NoSqlQueryBuilderClass<DocType> {\r\n\r\n    public options: MQueryOptions = {};\r\n    public _conditions: MangoQuerySelector<DocType> = {};\r\n    public _fields: any = {};\r\n    private _distinct: any;\r\n\r\n    /**\r\n     * MQuery constructor used for building queries.\r\n     *\r\n     * ####Example:\r\n     *     var query = new MQuery({ name: 'mquery' });\r\n     *     query.where('age').gte(21).exec(callback);\r\n     *\r\n     */\r\n    constructor(\r\n        mangoQuery?: MangoQuery<DocType>,\r\n        public _path?: any\r\n    ) {\r\n        if (mangoQuery) {\r\n            const queryBuilder: NoSqlQueryBuilder<DocType> = this as any;\r\n\r\n            if (mangoQuery.selector) {\r\n                queryBuilder.find(mangoQuery.selector);\r\n            }\r\n            if (mangoQuery.limit) {\r\n                queryBuilder.limit(mangoQuery.limit);\r\n            }\r\n            if (mangoQuery.skip) {\r\n                queryBuilder.skip(mangoQuery.skip);\r\n            }\r\n            if (mangoQuery.sort) {\r\n                mangoQuery.sort.forEach(s => queryBuilder.sort(s));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Specifies a `path` for use with chaining.\r\n     */\r\n    where(_path: string, _val?: MangoQuerySelector<DocType>): NoSqlQueryBuilder<DocType> {\r\n        if (!arguments.length) return this as any;\r\n        const type = typeof arguments[0];\r\n        if ('string' === type) {\r\n            this._path = arguments[0];\r\n            if (2 === arguments.length) {\r\n                (this._conditions as any)[this._path] = arguments[1];\r\n            }\r\n            return this as any;\r\n        }\r\n\r\n        if ('object' === type && !Array.isArray(arguments[0])) {\r\n            return this.merge(arguments[0]);\r\n        }\r\n\r\n        throw newRxTypeError('MQ1', {\r\n            path: arguments[0]\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Specifies the complementary comparison value for paths specified with `where()`\r\n     * ####Example\r\n     *     User.where('age').equals(49);\r\n     */\r\n    equals(val: any): NoSqlQueryBuilder<DocType> {\r\n        this._ensurePath('equals');\r\n        const path = this._path;\r\n        (this._conditions as any)[path] = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies the complementary comparison value for paths specified with `where()`\r\n     * This is alias of `equals`\r\n     */\r\n    eq(val: any): NoSqlQueryBuilder<DocType> {\r\n        this._ensurePath('eq');\r\n        const path = this._path;\r\n        (this._conditions as any)[path] = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies arguments for an `$or` condition.\r\n     * ####Example\r\n     *     query.or([{ color: 'red' }, { status: 'emergency' }])\r\n     */\r\n    or(array: any[]): NoSqlQueryBuilder<DocType> {\r\n        const or = this._conditions.$or || (this._conditions.$or = []);\r\n        if (!Array.isArray(array)) array = [array];\r\n        or.push.apply(or, array);\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies arguments for a `$nor` condition.\r\n     * ####Example\r\n     *     query.nor([{ color: 'green' }, { status: 'ok' }])\r\n     */\r\n    nor(array: any[]): NoSqlQueryBuilder<DocType> {\r\n        const nor = this._conditions.$nor || (this._conditions.$nor = []);\r\n        if (!Array.isArray(array)) array = [array];\r\n        nor.push.apply(nor, array);\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies arguments for a `$and` condition.\r\n     * ####Example\r\n     *     query.and([{ color: 'green' }, { status: 'ok' }])\r\n     * @see $and http://docs.mongodb.org/manual/reference/operator/and/\r\n     */\r\n    and(array: any[]): NoSqlQueryBuilder<DocType> {\r\n        const and = this._conditions.$and || (this._conditions.$and = []);\r\n        if (!Array.isArray(array)) array = [array];\r\n        and.push.apply(and, array);\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies a `$mod` condition\r\n     */\r\n    mod(_path: string, _val: number): NoSqlQueryBuilder<DocType> {\r\n        let val;\r\n        let path;\r\n\r\n        if (1 === arguments.length) {\r\n            this._ensurePath('mod');\r\n            val = arguments[0];\r\n            path = this._path;\r\n        } else if (2 === arguments.length && !Array.isArray(arguments[1])) {\r\n            this._ensurePath('mod');\r\n            val = (arguments as any).slice();\r\n            path = this._path;\r\n        } else if (3 === arguments.length) {\r\n            val = (arguments as any).slice(1);\r\n            path = arguments[0];\r\n        } else {\r\n            val = arguments[1];\r\n            path = arguments[0];\r\n        }\r\n\r\n        const conds = (this._conditions as any)[path] || ((this._conditions as any)[path] = {});\r\n        conds.$mod = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies an `$exists` condition\r\n     * ####Example\r\n     *     // { name: { $exists: true }}\r\n     *     Thing.where('name').exists()\r\n     *     Thing.where('name').exists(true)\r\n     *     Thing.find().exists('name')\r\n     */\r\n    exists(_path: string, _val: number): NoSqlQueryBuilder<DocType> {\r\n        let path;\r\n        let val;\r\n        if (0 === arguments.length) {\r\n            this._ensurePath('exists');\r\n            path = this._path;\r\n            val = true;\r\n        } else if (1 === arguments.length) {\r\n            if ('boolean' === typeof arguments[0]) {\r\n                this._ensurePath('exists');\r\n                path = this._path;\r\n                val = arguments[0];\r\n            } else {\r\n                path = arguments[0];\r\n                val = true;\r\n            }\r\n        } else if (2 === arguments.length) {\r\n            path = arguments[0];\r\n            val = arguments[1];\r\n        }\r\n\r\n        const conds = (this._conditions as any)[path] || ((this._conditions as any)[path] = {});\r\n        conds.$exists = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies an `$elemMatch` condition\r\n     * ####Example\r\n     *     query.elemMatch('comment', { author: 'autobot', votes: {$gte: 5}})\r\n     *     query.where('comment').elemMatch({ author: 'autobot', votes: {$gte: 5}})\r\n     *     query.elemMatch('comment', function (elem) {\r\n     *       elem.where('author').equals('autobot');\r\n     *       elem.where('votes').gte(5);\r\n     *     })\r\n     *     query.where('comment').elemMatch(function (elem) {\r\n     *       elem.where({ author: 'autobot' });\r\n     *       elem.where('votes').gte(5);\r\n     *     })\r\n     */\r\n    elemMatch(_path: string, _criteria: any): NoSqlQueryBuilder<DocType> {\r\n        if (null === arguments[0])\r\n            throw newRxTypeError('MQ2');\r\n\r\n        let fn;\r\n        let path;\r\n        let criteria;\r\n\r\n        if ('function' === typeof arguments[0]) {\r\n            this._ensurePath('elemMatch');\r\n            path = this._path;\r\n            fn = arguments[0];\r\n        } else if (isObject(arguments[0])) {\r\n            this._ensurePath('elemMatch');\r\n            path = this._path;\r\n            criteria = arguments[0];\r\n        } else if ('function' === typeof arguments[1]) {\r\n            path = arguments[0];\r\n            fn = arguments[1];\r\n        } else if (arguments[1] && isObject(arguments[1])) {\r\n            path = arguments[0];\r\n            criteria = arguments[1];\r\n        } else\r\n            throw newRxTypeError('MQ2');\r\n\r\n        if (fn) {\r\n            criteria = new NoSqlQueryBuilderClass;\r\n            fn(criteria);\r\n            criteria = criteria._conditions;\r\n        }\r\n\r\n        const conds = (this._conditions as any)[path] || ((this._conditions as any)[path] = {});\r\n        conds.$elemMatch = criteria;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Sets the sort order\r\n     * If an object is passed, values allowed are 'asc', 'desc', 'ascending', 'descending', 1, and -1.\r\n     * If a string is passed, it must be a space delimited list of path names.\r\n     * The sort order of each path is ascending unless the path name is prefixed with `-` which will be treated as descending.\r\n     * ####Example\r\n     *     query.sort({ field: 'asc', test: -1 });\r\n     *     query.sort('field -test');\r\n     *     query.sort([['field', 1], ['test', -1]]);\r\n     */\r\n    sort(arg: any): NoSqlQueryBuilder<DocType> {\r\n        if (!arg) return this as any;\r\n        let len;\r\n        const type = typeof arg;\r\n        // .sort([['field', 1], ['test', -1]])\r\n        if (Array.isArray(arg)) {\r\n            len = arg.length;\r\n            for (let i = 0; i < arg.length; ++i) {\r\n                _pushArr(this.options, arg[i][0], arg[i][1]);\r\n            }\r\n\r\n            return this as any;\r\n        }\r\n\r\n        // .sort('field -test')\r\n        if (1 === arguments.length && 'string' === type) {\r\n            arg = arg.split(/\\s+/);\r\n            len = arg.length;\r\n            for (let i = 0; i < len; ++i) {\r\n                let field = arg[i];\r\n                if (!field) continue;\r\n                const ascend = '-' === field[0] ? -1 : 1;\r\n                if (ascend === -1) field = field.substring(1);\r\n                push(this.options, field, ascend);\r\n            }\r\n\r\n            return this as any;\r\n        }\r\n\r\n        // .sort({ field: 1, test: -1 })\r\n        if (isObject(arg)) {\r\n            const keys = Object.keys(arg);\r\n            keys.forEach(field => push(this.options, field, arg[field]));\r\n            return this as any;\r\n        }\r\n\r\n        throw newRxTypeError('MQ3', {\r\n            args: arguments\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Merges another MQuery or conditions object into this one.\r\n     *\r\n     * When a MQuery is passed, conditions, field selection and options are merged.\r\n     *\r\n     */\r\n    merge(source: any): NoSqlQueryBuilder<DocType> {\r\n        if (!source) {\r\n            return this as any;\r\n        }\r\n\r\n        if (!canMerge(source)) {\r\n            throw newRxTypeError('MQ4', {\r\n                source\r\n            });\r\n        }\r\n\r\n        if (source instanceof NoSqlQueryBuilderClass) {\r\n            // if source has a feature, apply it to ourselves\r\n\r\n            if (source._conditions)\r\n                merge(this._conditions, source._conditions);\r\n\r\n            if (source._fields) {\r\n                if (!this._fields) this._fields = {};\r\n                merge(this._fields, source._fields);\r\n            }\r\n\r\n            if (source.options) {\r\n                if (!this.options) this.options = {};\r\n                merge(this.options, source.options);\r\n            }\r\n\r\n            if (source._distinct)\r\n                this._distinct = source._distinct;\r\n\r\n            return this as any;\r\n        }\r\n\r\n        // plain object\r\n        merge(this._conditions, source);\r\n\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Finds documents.\r\n     * ####Example\r\n     *     query.find()\r\n     *     query.find({ name: 'Burning Lights' })\r\n     */\r\n    find(criteria: any): NoSqlQueryBuilder<DocType> {\r\n        if (canMerge(criteria)) {\r\n            this.merge(criteria);\r\n        }\r\n\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Make sure _path is set.\r\n     *\r\n     * @param {String} method\r\n     */\r\n    _ensurePath(method: any) {\r\n        if (!this._path) {\r\n            throw newRxError('MQ5', {\r\n                method\r\n            });\r\n        }\r\n    }\r\n\r\n    toJSON(): {\r\n        query: MangoQuery<DocType>;\r\n        path?: string;\r\n    } {\r\n        const query: MangoQuery<DocType> = {\r\n            selector: this._conditions,\r\n        };\r\n\r\n        if (this.options.skip) {\r\n            query.skip = this.options.skip;\r\n        }\r\n        if (this.options.limit) {\r\n            query.limit = this.options.limit;\r\n        }\r\n        if (this.options.sort) {\r\n            query.sort = mQuerySortToRxDBSort(this.options.sort);\r\n        }\r\n\r\n        return {\r\n            query,\r\n            path: this._path\r\n        };\r\n    }\r\n}\r\n\r\nexport function mQuerySortToRxDBSort<DocType>(\r\n    sort: { [k: string]: 1 | -1; }\r\n): MangoQuerySortPart<DocType>[] {\r\n    return Object.entries(sort).map(([k, v]) => {\r\n        const direction: MangoQuerySortDirection = v === 1 ? 'asc' : 'desc';\r\n        const part: MangoQuerySortPart<DocType> = { [k]: direction } as any;\r\n        return part;\r\n    });\r\n}\r\n\r\n/**\r\n * Because some prototype-methods are generated,\r\n * we have to define the type of NoSqlQueryBuilder here\r\n */\r\n\r\nexport interface NoSqlQueryBuilder<DocType = any> extends NoSqlQueryBuilderClass<DocType> {\r\n    maxScan: ReturnSelfNumberFunction<DocType>;\r\n    batchSize: ReturnSelfNumberFunction<DocType>;\r\n    limit: ReturnSelfNumberFunction<DocType>;\r\n    skip: ReturnSelfNumberFunction<DocType>;\r\n    comment: ReturnSelfFunction<DocType>;\r\n\r\n    gt: ReturnSelfFunction<DocType>;\r\n    gte: ReturnSelfFunction<DocType>;\r\n    lt: ReturnSelfFunction<DocType>;\r\n    lte: ReturnSelfFunction<DocType>;\r\n    ne: ReturnSelfFunction<DocType>;\r\n    in: ReturnSelfFunction<DocType>;\r\n    nin: ReturnSelfFunction<DocType>;\r\n    all: ReturnSelfFunction<DocType>;\r\n    regex: ReturnSelfFunction<DocType>;\r\n    size: ReturnSelfFunction<DocType>;\r\n\r\n}\r\n\r\ndeclare type ReturnSelfFunction<DocType> = (v: any) => NoSqlQueryBuilder<DocType>;\r\ndeclare type ReturnSelfNumberFunction<DocType> = (v: number | null) => NoSqlQueryBuilder<DocType>;\r\n\r\n/**\r\n * limit, skip, maxScan, batchSize, comment\r\n *\r\n * Sets these associated options.\r\n *\r\n *     query.comment('feed query');\r\n */\r\nexport const OTHER_MANGO_ATTRIBUTES = ['limit', 'skip', 'maxScan', 'batchSize', 'comment'];\r\nOTHER_MANGO_ATTRIBUTES.forEach(function (method) {\r\n    (NoSqlQueryBuilderClass.prototype as any)[method] = function (v: any) {\r\n        this.options[method] = v;\r\n        return this;\r\n    };\r\n});\r\n\r\n\r\n/**\r\n * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance\r\n *\r\n *     Thing.where('type').nin(array)\r\n */\r\nexport const OTHER_MANGO_OPERATORS = [\r\n    'gt', 'gte', 'lt', 'lte', 'ne',\r\n    'in', 'nin', 'all', 'regex', 'size'\r\n];\r\nOTHER_MANGO_OPERATORS.forEach(function ($conditional) {\r\n    (NoSqlQueryBuilderClass.prototype as any)[$conditional] = function () {\r\n        let path;\r\n        let val;\r\n\r\n        if (1 === arguments.length) {\r\n            this._ensurePath($conditional);\r\n            val = arguments[0];\r\n            path = this._path;\r\n        } else {\r\n            val = arguments[1];\r\n            path = arguments[0];\r\n        }\r\n\r\n        const conds = this._conditions[path] === null || typeof this._conditions[path] === 'object' ?\r\n            this._conditions[path] :\r\n            (this._conditions[path] = {});\r\n\r\n\r\n\r\n        if ($conditional === 'regex') {\r\n            if (val instanceof RegExp) {\r\n                throw newRxError('QU16', {\r\n                    field: path,\r\n                    query: this._conditions,\r\n                });\r\n            }\r\n            if (typeof val === 'string') {\r\n                conds['$' + $conditional] = val;\r\n            } else {\r\n                conds['$' + $conditional] = val.$regex;\r\n                if (val.$options) {\r\n                    conds.$options = val.$options;\r\n                }\r\n            }\r\n        } else {\r\n            conds['$' + $conditional] = val;\r\n        }\r\n\r\n        return this;\r\n    };\r\n});\r\n\r\n\r\nfunction push(opts: any, field: string, value: any) {\r\n    if (Array.isArray(opts.sort)) {\r\n        throw newRxTypeError('MQ6', {\r\n            opts,\r\n            field,\r\n            value\r\n        });\r\n    }\r\n\r\n    if (value && value.$meta) {\r\n        const sort = opts.sort || (opts.sort = {});\r\n        sort[field] = {\r\n            $meta: value.$meta\r\n        };\r\n        return;\r\n    }\r\n\r\n    const val = String(value || 1).toLowerCase();\r\n    if (!/^(?:ascending|asc|descending|desc|1|-1)$/.test(val)) {\r\n        if (Array.isArray(value)) value = '[' + value + ']';\r\n        throw newRxTypeError('MQ7', {\r\n            field,\r\n            value\r\n        });\r\n    }\r\n    // store `sort` in a sane format\r\n    const s = opts.sort || (opts.sort = {});\r\n    const valueStr = value.toString()\r\n        .replace('asc', '1')\r\n        .replace('ascending', '1')\r\n        .replace('desc', '-1')\r\n        .replace('descending', '-1');\r\n    s[field] = parseInt(valueStr, 10);\r\n}\r\n\r\nfunction _pushArr(opts: any, field: string, value: any) {\r\n    opts.sort = opts.sort || [];\r\n    if (!Array.isArray(opts.sort)) {\r\n        throw newRxTypeError('MQ8', {\r\n            opts,\r\n            field,\r\n            value\r\n        });\r\n    }\r\n\r\n    /*    const valueStr = value.toString()\r\n            .replace('asc', '1')\r\n            .replace('ascending', '1')\r\n            .replace('desc', '-1')\r\n            .replace('descending', '-1');*/\r\n    opts.sort.push([field, value]);\r\n}\r\n\r\n\r\n/**\r\n * Determines if `conds` can be merged using `mquery().merge()`\r\n */\r\nexport function canMerge(conds: any): boolean {\r\n    return conds instanceof NoSqlQueryBuilderClass || isObject(conds);\r\n}\r\n\r\n\r\nexport function createQueryBuilder<DocType>(query?: MangoQuery<DocType>, path?: any): NoSqlQueryBuilder<DocType> {\r\n    return new NoSqlQueryBuilderClass(query, path) as NoSqlQueryBuilder<DocType>;\r\n}\r\n"],"mappings":"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","ignoreList":[]}