{"version":3,"file":"mingo-updater.js","names":["createUpdater","clone","updater","mingoUpdater","d","op","updateObject","cloneMode","cloned"],"sources":["../../../../src/plugins/update/mingo-updater.ts"],"sourcesContent":["/**\r\n * Custom build of the mingo updater for smaller build size\r\n */\r\n\r\nimport {\r\n    createUpdater\r\n} from \"mingo/updater\";\r\nimport {\r\n    clone\r\n} from '../utils/index.ts';\r\nimport type {\r\n    UpdateQuery\r\n} from '../../types/index';\r\n\r\nlet updater: any;\r\nexport function mingoUpdater<T>(\r\n    d: T, op: UpdateQuery<T>\r\n): T {\r\n    if (!updater) {\r\n        const updateObject = createUpdater({ cloneMode: \"none\" });\r\n        updater = (d: T, op: UpdateQuery<T>) => {\r\n            const cloned = clone(d);\r\n            updateObject(cloned as any, op as any);\r\n            return cloned;\r\n        }\r\n    }\r\n    return updater(d, op);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA,SACIA,aAAa,QACV,eAAe;AACtB,SACIC,KAAK,QACF,mBAAmB;AAK1B,IAAIC,OAAY;AAChB,OAAO,SAASC,YAAYA,CACxBC,CAAI,EAAEC,EAAkB,EACvB;EACD,IAAI,CAACH,OAAO,EAAE;IACV,IAAMI,YAAY,GAAGN,aAAa,CAAC;MAAEO,SAAS,EAAE;IAAO,CAAC,CAAC;IACzDL,OAAO,GAAGA,CAACE,CAAI,EAAEC,EAAkB,KAAK;MACpC,IAAMG,MAAM,GAAGP,KAAK,CAACG,CAAC,CAAC;MACvBE,YAAY,CAACE,MAAM,EAASH,EAAS,CAAC;MACtC,OAAOG,MAAM;IACjB,CAAC;EACL;EACA,OAAON,OAAO,CAACE,CAAC,EAAEC,EAAE,CAAC;AACzB","ignoreList":[]}