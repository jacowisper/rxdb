{"version":3,"file":"nosql-query-builder.js","names":["isObject","merge","newRxTypeError","newRxError","NoSqlQueryBuilderClass","mangoQuery","_path","options","_conditions","_fields","queryBuilder","selector","find","limit","skip","sort","forEach","s","_proto","prototype","where","_val","arguments","length","type","Array","isArray","path","equals","val","_ensurePath","eq","or","array","$or","push","apply","nor","$nor","and","$and","mod","slice","conds","$mod","exists","$exists","elemMatch","_criteria","fn","criteria","$elemMatch","arg","len","i","_pushArr","split","field","ascend","substring","keys","Object","args","source","canMerge","_distinct","method","toJSON","query","mQuerySortToRxDBSort","entries","map","k","v","direction","part","OTHER_MANGO_ATTRIBUTES","OTHER_MANGO_OPERATORS","$conditional","RegExp","$regex","$options","opts","value","$meta","String","toLowerCase","test","valueStr","toString","replace","parseInt","createQueryBuilder"],"sources":["../../../../../src/plugins/query-builder/mquery/nosql-query-builder.ts"],"sourcesContent":["/**\r\n * this is based on\r\n * @link https://github.com/aheckmann/mquery/blob/master/lib/mquery.js\r\n */\r\nimport {\r\n    isObject,\r\n    merge\r\n} from './mquery-utils.ts';\r\nimport {\r\n    newRxTypeError,\r\n    newRxError\r\n} from '../../../rx-error.ts';\r\nimport type {\r\n    MangoQuery,\r\n    MangoQuerySelector,\r\n    MangoQuerySortPart,\r\n    MangoQuerySortDirection\r\n} from '../../../types/index.d.ts';\r\n\r\n\r\ndeclare type MQueryOptions = {\r\n    limit?: number;\r\n    skip?: number;\r\n    sort?: any;\r\n};\r\n\r\nexport class NoSqlQueryBuilderClass<DocType> {\r\n\r\n    public options: MQueryOptions = {};\r\n    public _conditions: MangoQuerySelector<DocType> = {};\r\n    public _fields: any = {};\r\n    private _distinct: any;\r\n\r\n    /**\r\n     * MQuery constructor used for building queries.\r\n     *\r\n     * ####Example:\r\n     *     var query = new MQuery({ name: 'mquery' });\r\n     *     query.where('age').gte(21).exec(callback);\r\n     *\r\n     */\r\n    constructor(\r\n        mangoQuery?: MangoQuery<DocType>,\r\n        public _path?: any\r\n    ) {\r\n        if (mangoQuery) {\r\n            const queryBuilder: NoSqlQueryBuilder<DocType> = this as any;\r\n\r\n            if (mangoQuery.selector) {\r\n                queryBuilder.find(mangoQuery.selector);\r\n            }\r\n            if (mangoQuery.limit) {\r\n                queryBuilder.limit(mangoQuery.limit);\r\n            }\r\n            if (mangoQuery.skip) {\r\n                queryBuilder.skip(mangoQuery.skip);\r\n            }\r\n            if (mangoQuery.sort) {\r\n                mangoQuery.sort.forEach(s => queryBuilder.sort(s));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Specifies a `path` for use with chaining.\r\n     */\r\n    where(_path: string, _val?: MangoQuerySelector<DocType>): NoSqlQueryBuilder<DocType> {\r\n        if (!arguments.length) return this as any;\r\n        const type = typeof arguments[0];\r\n        if ('string' === type) {\r\n            this._path = arguments[0];\r\n            if (2 === arguments.length) {\r\n                (this._conditions as any)[this._path] = arguments[1];\r\n            }\r\n            return this as any;\r\n        }\r\n\r\n        if ('object' === type && !Array.isArray(arguments[0])) {\r\n            return this.merge(arguments[0]);\r\n        }\r\n\r\n        throw newRxTypeError('MQ1', {\r\n            path: arguments[0]\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Specifies the complementary comparison value for paths specified with `where()`\r\n     * ####Example\r\n     *     User.where('age').equals(49);\r\n     */\r\n    equals(val: any): NoSqlQueryBuilder<DocType> {\r\n        this._ensurePath('equals');\r\n        const path = this._path;\r\n        (this._conditions as any)[path] = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies the complementary comparison value for paths specified with `where()`\r\n     * This is alias of `equals`\r\n     */\r\n    eq(val: any): NoSqlQueryBuilder<DocType> {\r\n        this._ensurePath('eq');\r\n        const path = this._path;\r\n        (this._conditions as any)[path] = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies arguments for an `$or` condition.\r\n     * ####Example\r\n     *     query.or([{ color: 'red' }, { status: 'emergency' }])\r\n     */\r\n    or(array: any[]): NoSqlQueryBuilder<DocType> {\r\n        const or = this._conditions.$or || (this._conditions.$or = []);\r\n        if (!Array.isArray(array)) array = [array];\r\n        or.push.apply(or, array);\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies arguments for a `$nor` condition.\r\n     * ####Example\r\n     *     query.nor([{ color: 'green' }, { status: 'ok' }])\r\n     */\r\n    nor(array: any[]): NoSqlQueryBuilder<DocType> {\r\n        const nor = this._conditions.$nor || (this._conditions.$nor = []);\r\n        if (!Array.isArray(array)) array = [array];\r\n        nor.push.apply(nor, array);\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies arguments for a `$and` condition.\r\n     * ####Example\r\n     *     query.and([{ color: 'green' }, { status: 'ok' }])\r\n     * @see $and http://docs.mongodb.org/manual/reference/operator/and/\r\n     */\r\n    and(array: any[]): NoSqlQueryBuilder<DocType> {\r\n        const and = this._conditions.$and || (this._conditions.$and = []);\r\n        if (!Array.isArray(array)) array = [array];\r\n        and.push.apply(and, array);\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies a `$mod` condition\r\n     */\r\n    mod(_path: string, _val: number): NoSqlQueryBuilder<DocType> {\r\n        let val;\r\n        let path;\r\n\r\n        if (1 === arguments.length) {\r\n            this._ensurePath('mod');\r\n            val = arguments[0];\r\n            path = this._path;\r\n        } else if (2 === arguments.length && !Array.isArray(arguments[1])) {\r\n            this._ensurePath('mod');\r\n            val = (arguments as any).slice();\r\n            path = this._path;\r\n        } else if (3 === arguments.length) {\r\n            val = (arguments as any).slice(1);\r\n            path = arguments[0];\r\n        } else {\r\n            val = arguments[1];\r\n            path = arguments[0];\r\n        }\r\n\r\n        const conds = (this._conditions as any)[path] || ((this._conditions as any)[path] = {});\r\n        conds.$mod = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies an `$exists` condition\r\n     * ####Example\r\n     *     // { name: { $exists: true }}\r\n     *     Thing.where('name').exists()\r\n     *     Thing.where('name').exists(true)\r\n     *     Thing.find().exists('name')\r\n     */\r\n    exists(_path: string, _val: number): NoSqlQueryBuilder<DocType> {\r\n        let path;\r\n        let val;\r\n        if (0 === arguments.length) {\r\n            this._ensurePath('exists');\r\n            path = this._path;\r\n            val = true;\r\n        } else if (1 === arguments.length) {\r\n            if ('boolean' === typeof arguments[0]) {\r\n                this._ensurePath('exists');\r\n                path = this._path;\r\n                val = arguments[0];\r\n            } else {\r\n                path = arguments[0];\r\n                val = true;\r\n            }\r\n        } else if (2 === arguments.length) {\r\n            path = arguments[0];\r\n            val = arguments[1];\r\n        }\r\n\r\n        const conds = (this._conditions as any)[path] || ((this._conditions as any)[path] = {});\r\n        conds.$exists = val;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Specifies an `$elemMatch` condition\r\n     * ####Example\r\n     *     query.elemMatch('comment', { author: 'autobot', votes: {$gte: 5}})\r\n     *     query.where('comment').elemMatch({ author: 'autobot', votes: {$gte: 5}})\r\n     *     query.elemMatch('comment', function (elem) {\r\n     *       elem.where('author').equals('autobot');\r\n     *       elem.where('votes').gte(5);\r\n     *     })\r\n     *     query.where('comment').elemMatch(function (elem) {\r\n     *       elem.where({ author: 'autobot' });\r\n     *       elem.where('votes').gte(5);\r\n     *     })\r\n     */\r\n    elemMatch(_path: string, _criteria: any): NoSqlQueryBuilder<DocType> {\r\n        if (null === arguments[0])\r\n            throw newRxTypeError('MQ2');\r\n\r\n        let fn;\r\n        let path;\r\n        let criteria;\r\n\r\n        if ('function' === typeof arguments[0]) {\r\n            this._ensurePath('elemMatch');\r\n            path = this._path;\r\n            fn = arguments[0];\r\n        } else if (isObject(arguments[0])) {\r\n            this._ensurePath('elemMatch');\r\n            path = this._path;\r\n            criteria = arguments[0];\r\n        } else if ('function' === typeof arguments[1]) {\r\n            path = arguments[0];\r\n            fn = arguments[1];\r\n        } else if (arguments[1] && isObject(arguments[1])) {\r\n            path = arguments[0];\r\n            criteria = arguments[1];\r\n        } else\r\n            throw newRxTypeError('MQ2');\r\n\r\n        if (fn) {\r\n            criteria = new NoSqlQueryBuilderClass;\r\n            fn(criteria);\r\n            criteria = criteria._conditions;\r\n        }\r\n\r\n        const conds = (this._conditions as any)[path] || ((this._conditions as any)[path] = {});\r\n        conds.$elemMatch = criteria;\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Sets the sort order\r\n     * If an object is passed, values allowed are 'asc', 'desc', 'ascending', 'descending', 1, and -1.\r\n     * If a string is passed, it must be a space delimited list of path names.\r\n     * The sort order of each path is ascending unless the path name is prefixed with `-` which will be treated as descending.\r\n     * ####Example\r\n     *     query.sort({ field: 'asc', test: -1 });\r\n     *     query.sort('field -test');\r\n     *     query.sort([['field', 1], ['test', -1]]);\r\n     */\r\n    sort(arg: any): NoSqlQueryBuilder<DocType> {\r\n        if (!arg) return this as any;\r\n        let len;\r\n        const type = typeof arg;\r\n        // .sort([['field', 1], ['test', -1]])\r\n        if (Array.isArray(arg)) {\r\n            len = arg.length;\r\n            for (let i = 0; i < arg.length; ++i) {\r\n                _pushArr(this.options, arg[i][0], arg[i][1]);\r\n            }\r\n\r\n            return this as any;\r\n        }\r\n\r\n        // .sort('field -test')\r\n        if (1 === arguments.length && 'string' === type) {\r\n            arg = arg.split(/\\s+/);\r\n            len = arg.length;\r\n            for (let i = 0; i < len; ++i) {\r\n                let field = arg[i];\r\n                if (!field) continue;\r\n                const ascend = '-' === field[0] ? -1 : 1;\r\n                if (ascend === -1) field = field.substring(1);\r\n                push(this.options, field, ascend);\r\n            }\r\n\r\n            return this as any;\r\n        }\r\n\r\n        // .sort({ field: 1, test: -1 })\r\n        if (isObject(arg)) {\r\n            const keys = Object.keys(arg);\r\n            keys.forEach(field => push(this.options, field, arg[field]));\r\n            return this as any;\r\n        }\r\n\r\n        throw newRxTypeError('MQ3', {\r\n            args: arguments\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Merges another MQuery or conditions object into this one.\r\n     *\r\n     * When a MQuery is passed, conditions, field selection and options are merged.\r\n     *\r\n     */\r\n    merge(source: any): NoSqlQueryBuilder<DocType> {\r\n        if (!source) {\r\n            return this as any;\r\n        }\r\n\r\n        if (!canMerge(source)) {\r\n            throw newRxTypeError('MQ4', {\r\n                source\r\n            });\r\n        }\r\n\r\n        if (source instanceof NoSqlQueryBuilderClass) {\r\n            // if source has a feature, apply it to ourselves\r\n\r\n            if (source._conditions)\r\n                merge(this._conditions, source._conditions);\r\n\r\n            if (source._fields) {\r\n                if (!this._fields) this._fields = {};\r\n                merge(this._fields, source._fields);\r\n            }\r\n\r\n            if (source.options) {\r\n                if (!this.options) this.options = {};\r\n                merge(this.options, source.options);\r\n            }\r\n\r\n            if (source._distinct)\r\n                this._distinct = source._distinct;\r\n\r\n            return this as any;\r\n        }\r\n\r\n        // plain object\r\n        merge(this._conditions, source);\r\n\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Finds documents.\r\n     * ####Example\r\n     *     query.find()\r\n     *     query.find({ name: 'Burning Lights' })\r\n     */\r\n    find(criteria: any): NoSqlQueryBuilder<DocType> {\r\n        if (canMerge(criteria)) {\r\n            this.merge(criteria);\r\n        }\r\n\r\n        return this as any;\r\n    }\r\n\r\n    /**\r\n     * Make sure _path is set.\r\n     *\r\n     * @param {String} method\r\n     */\r\n    _ensurePath(method: any) {\r\n        if (!this._path) {\r\n            throw newRxError('MQ5', {\r\n                method\r\n            });\r\n        }\r\n    }\r\n\r\n    toJSON(): {\r\n        query: MangoQuery<DocType>;\r\n        path?: string;\r\n    } {\r\n        const query: MangoQuery<DocType> = {\r\n            selector: this._conditions,\r\n        };\r\n\r\n        if (this.options.skip) {\r\n            query.skip = this.options.skip;\r\n        }\r\n        if (this.options.limit) {\r\n            query.limit = this.options.limit;\r\n        }\r\n        if (this.options.sort) {\r\n            query.sort = mQuerySortToRxDBSort(this.options.sort);\r\n        }\r\n\r\n        return {\r\n            query,\r\n            path: this._path\r\n        };\r\n    }\r\n}\r\n\r\nexport function mQuerySortToRxDBSort<DocType>(\r\n    sort: { [k: string]: 1 | -1; }\r\n): MangoQuerySortPart<DocType>[] {\r\n    return Object.entries(sort).map(([k, v]) => {\r\n        const direction: MangoQuerySortDirection = v === 1 ? 'asc' : 'desc';\r\n        const part: MangoQuerySortPart<DocType> = { [k]: direction } as any;\r\n        return part;\r\n    });\r\n}\r\n\r\n/**\r\n * Because some prototype-methods are generated,\r\n * we have to define the type of NoSqlQueryBuilder here\r\n */\r\n\r\nexport interface NoSqlQueryBuilder<DocType = any> extends NoSqlQueryBuilderClass<DocType> {\r\n    maxScan: ReturnSelfNumberFunction<DocType>;\r\n    batchSize: ReturnSelfNumberFunction<DocType>;\r\n    limit: ReturnSelfNumberFunction<DocType>;\r\n    skip: ReturnSelfNumberFunction<DocType>;\r\n    comment: ReturnSelfFunction<DocType>;\r\n\r\n    gt: ReturnSelfFunction<DocType>;\r\n    gte: ReturnSelfFunction<DocType>;\r\n    lt: ReturnSelfFunction<DocType>;\r\n    lte: ReturnSelfFunction<DocType>;\r\n    ne: ReturnSelfFunction<DocType>;\r\n    in: ReturnSelfFunction<DocType>;\r\n    nin: ReturnSelfFunction<DocType>;\r\n    all: ReturnSelfFunction<DocType>;\r\n    regex: ReturnSelfFunction<DocType>;\r\n    size: ReturnSelfFunction<DocType>;\r\n\r\n}\r\n\r\ndeclare type ReturnSelfFunction<DocType> = (v: any) => NoSqlQueryBuilder<DocType>;\r\ndeclare type ReturnSelfNumberFunction<DocType> = (v: number | null) => NoSqlQueryBuilder<DocType>;\r\n\r\n/**\r\n * limit, skip, maxScan, batchSize, comment\r\n *\r\n * Sets these associated options.\r\n *\r\n *     query.comment('feed query');\r\n */\r\nexport const OTHER_MANGO_ATTRIBUTES = ['limit', 'skip', 'maxScan', 'batchSize', 'comment'];\r\nOTHER_MANGO_ATTRIBUTES.forEach(function (method) {\r\n    (NoSqlQueryBuilderClass.prototype as any)[method] = function (v: any) {\r\n        this.options[method] = v;\r\n        return this;\r\n    };\r\n});\r\n\r\n\r\n/**\r\n * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance\r\n *\r\n *     Thing.where('type').nin(array)\r\n */\r\nexport const OTHER_MANGO_OPERATORS = [\r\n    'gt', 'gte', 'lt', 'lte', 'ne',\r\n    'in', 'nin', 'all', 'regex', 'size'\r\n];\r\nOTHER_MANGO_OPERATORS.forEach(function ($conditional) {\r\n    (NoSqlQueryBuilderClass.prototype as any)[$conditional] = function () {\r\n        let path;\r\n        let val;\r\n\r\n        if (1 === arguments.length) {\r\n            this._ensurePath($conditional);\r\n            val = arguments[0];\r\n            path = this._path;\r\n        } else {\r\n            val = arguments[1];\r\n            path = arguments[0];\r\n        }\r\n\r\n        const conds = this._conditions[path] === null || typeof this._conditions[path] === 'object' ?\r\n            this._conditions[path] :\r\n            (this._conditions[path] = {});\r\n\r\n\r\n\r\n        if ($conditional === 'regex') {\r\n            if (val instanceof RegExp) {\r\n                throw newRxError('QU16', {\r\n                    field: path,\r\n                    query: this._conditions,\r\n                });\r\n            }\r\n            if (typeof val === 'string') {\r\n                conds['$' + $conditional] = val;\r\n            } else {\r\n                conds['$' + $conditional] = val.$regex;\r\n                if (val.$options) {\r\n                    conds.$options = val.$options;\r\n                }\r\n            }\r\n        } else {\r\n            conds['$' + $conditional] = val;\r\n        }\r\n\r\n        return this;\r\n    };\r\n});\r\n\r\n\r\nfunction push(opts: any, field: string, value: any) {\r\n    if (Array.isArray(opts.sort)) {\r\n        throw newRxTypeError('MQ6', {\r\n            opts,\r\n            field,\r\n            value\r\n        });\r\n    }\r\n\r\n    if (value && value.$meta) {\r\n        const sort = opts.sort || (opts.sort = {});\r\n        sort[field] = {\r\n            $meta: value.$meta\r\n        };\r\n        return;\r\n    }\r\n\r\n    const val = String(value || 1).toLowerCase();\r\n    if (!/^(?:ascending|asc|descending|desc|1|-1)$/.test(val)) {\r\n        if (Array.isArray(value)) value = '[' + value + ']';\r\n        throw newRxTypeError('MQ7', {\r\n            field,\r\n            value\r\n        });\r\n    }\r\n    // store `sort` in a sane format\r\n    const s = opts.sort || (opts.sort = {});\r\n    const valueStr = value.toString()\r\n        .replace('asc', '1')\r\n        .replace('ascending', '1')\r\n        .replace('desc', '-1')\r\n        .replace('descending', '-1');\r\n    s[field] = parseInt(valueStr, 10);\r\n}\r\n\r\nfunction _pushArr(opts: any, field: string, value: any) {\r\n    opts.sort = opts.sort || [];\r\n    if (!Array.isArray(opts.sort)) {\r\n        throw newRxTypeError('MQ8', {\r\n            opts,\r\n            field,\r\n            value\r\n        });\r\n    }\r\n\r\n    /*    const valueStr = value.toString()\r\n            .replace('asc', '1')\r\n            .replace('ascending', '1')\r\n            .replace('desc', '-1')\r\n            .replace('descending', '-1');*/\r\n    opts.sort.push([field, value]);\r\n}\r\n\r\n\r\n/**\r\n * Determines if `conds` can be merged using `mquery().merge()`\r\n */\r\nexport function canMerge(conds: any): boolean {\r\n    return conds instanceof NoSqlQueryBuilderClass || isObject(conds);\r\n}\r\n\r\n\r\nexport function createQueryBuilder<DocType>(query?: MangoQuery<DocType>, path?: any): NoSqlQueryBuilder<DocType> {\r\n    return new NoSqlQueryBuilderClass(query, path) as NoSqlQueryBuilder<DocType>;\r\n}\r\n"],"mappings":"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","ignoreList":[]}