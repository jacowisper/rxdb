{"version":3,"file":"index.js","names":["isMyJsonValid","wrappedValidateStorageFactory","getValidator","schema","validator","docData","isValid","errors","wrappedValidateIsMyJsonValidStorage"],"sources":["../../../../src/plugins/validate-is-my-json-valid/index.ts"],"sourcesContent":["/**\r\n * this plugin validates documents before they can be inserted into the RxCollection.\r\n * It's using is-my-json-valid as jsonschema-validator\r\n * @link https://github.com/mafintosh/is-my-json-valid\r\n */\r\nimport isMyJsonValid from 'is-my-json-valid';\r\nimport type {\r\n    RxJsonSchema\r\n} from '../../types/index.d.ts';\r\nimport { wrappedValidateStorageFactory } from '../../plugin-helpers.ts';\r\n\r\n\r\nexport function getValidator(\r\n    schema: RxJsonSchema<any>\r\n) {\r\n    const validator = isMyJsonValid(schema as any);\r\n    return (docData: any) => {\r\n        const isValid = validator(docData);\r\n        if (isValid) {\r\n            return [];\r\n        } else {\r\n            return validator.errors as any;\r\n        }\r\n    };\r\n}\r\n\r\nexport const wrappedValidateIsMyJsonValidStorage = wrappedValidateStorageFactory(\r\n    getValidator,\r\n    'is-my-json-valid'\r\n);\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAOA,aAAa,MAAM,kBAAkB;AAI5C,SAASC,6BAA6B,QAAQ,yBAAyB;AAGvE,OAAO,SAASC,YAAYA,CACxBC,MAAyB,EAC3B;EACE,IAAMC,SAAS,GAAGJ,aAAa,CAACG,MAAa,CAAC;EAC9C,OAAQE,OAAY,IAAK;IACrB,IAAMC,OAAO,GAAGF,SAAS,CAACC,OAAO,CAAC;IAClC,IAAIC,OAAO,EAAE;MACT,OAAO,EAAE;IACb,CAAC,MAAM;MACH,OAAOF,SAAS,CAACG,MAAM;IAC3B;EACJ,CAAC;AACL;AAEA,OAAO,IAAMC,mCAAmC,GAAGP,6BAA6B,CAC5EC,YAAY,EACZ,kBACJ,CAAC","ignoreList":[]}