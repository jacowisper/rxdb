{"version":3,"file":"vector-distance.js","names":["euclideanDistance","A","B","Math","sqrt","reduce","sum","a","i","pow","manhattanDistance","abs","cosineSimilarity","dotProduct","magnitudeA","magnitudeB","b","jaccardSimilarity","setA","Set","setB","intersection","filter","x","has","size","union"],"sources":["../../../../src/plugins/vector/vector-distance.ts"],"sourcesContent":["import type { Vector } from './types';\r\n\r\n/**\r\n * Vector comparison methods\r\n * @link https://www.restack.io/p/vector-database-knowledge-answer-javascript-cat-ai\r\n * @returns \r\n */\r\nexport function euclideanDistance(A: Vector, B: Vector): number {\r\n    return Math.sqrt(A.reduce((sum, a, i) => sum + Math.pow(a - B[i], 2), 0));\r\n}\r\nexport function manhattanDistance(A: Vector, B: Vector) {\r\n    return A.reduce((sum, a, i) => sum + Math.abs(a - B[i]), 0);\r\n}\r\n\r\n\r\nexport function cosineSimilarity(A: Vector, B: Vector): number {\r\n    const dotProduct = A.reduce((sum, a, i) => sum + a * B[i], 0);\r\n    const magnitudeA = Math.sqrt(A.reduce((sum, a) => sum + a * a, 0));\r\n    const magnitudeB = Math.sqrt(B.reduce((sum, b) => sum + b * b, 0));\r\n    return dotProduct / (magnitudeA * magnitudeB);\r\n}\r\n\r\n\r\n/**\r\n * @link https://github.com/vector5ai/vector5db/blob/main/src/metrics/JaccardSimilarity.ts\r\n */\r\nexport function jaccardSimilarity(a: number[], b: number[]): number {\r\n    const setA = new Set(a);\r\n    const setB = new Set(b);\r\n    const intersection = new Set([...setA].filter((x) => setB.has(x))).size;\r\n    const union = new Set([...setA, ...setB]).size;\r\n\r\n    return 1 - (intersection / union);\r\n}\r\n"],"mappings":"AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,iBAAiBA,CAACC,CAAS,EAAEC,CAAS,EAAU;EAC5D,OAAOC,IAAI,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAKF,GAAG,GAAGH,IAAI,CAACM,GAAG,CAACF,CAAC,GAAGL,CAAC,CAACM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7E;AACA,OAAO,SAASE,iBAAiBA,CAACT,CAAS,EAAEC,CAAS,EAAE;EACpD,OAAOD,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAKF,GAAG,GAAGH,IAAI,CAACQ,GAAG,CAACJ,CAAC,GAAGL,CAAC,CAACM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/D;AAGA,OAAO,SAASI,gBAAgBA,CAACX,CAAS,EAAEC,CAAS,EAAU;EAC3D,IAAMW,UAAU,GAAGZ,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAKF,GAAG,GAAGC,CAAC,GAAGL,CAAC,CAACM,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,IAAMM,UAAU,GAAGX,IAAI,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,KAAKD,GAAG,GAAGC,CAAC,GAAGA,CAAC,EAAE,CAAC,CAAC,CAAC;EAClE,IAAMQ,UAAU,GAAGZ,IAAI,CAACC,IAAI,CAACF,CAAC,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEU,CAAC,KAAKV,GAAG,GAAGU,CAAC,GAAGA,CAAC,EAAE,CAAC,CAAC,CAAC;EAClE,OAAOH,UAAU,IAAIC,UAAU,GAAGC,UAAU,CAAC;AACjD;;AAGA;AACA;AACA;AACA,OAAO,SAASE,iBAAiBA,CAACV,CAAW,EAAES,CAAW,EAAU;EAChE,IAAME,IAAI,GAAG,IAAIC,GAAG,CAACZ,CAAC,CAAC;EACvB,IAAMa,IAAI,GAAG,IAAID,GAAG,CAACH,CAAC,CAAC;EACvB,IAAMK,YAAY,GAAG,IAAIF,GAAG,CAAC,CAAC,GAAGD,IAAI,CAAC,CAACI,MAAM,CAAEC,CAAC,IAAKH,IAAI,CAACI,GAAG,CAACD,CAAC,CAAC,CAAC,CAAC,CAACE,IAAI;EACvE,IAAMC,KAAK,GAAG,IAAIP,GAAG,CAAC,CAAC,GAAGD,IAAI,EAAE,GAAGE,IAAI,CAAC,CAAC,CAACK,IAAI;EAE9C,OAAO,CAAC,GAAIJ,YAAY,GAAGK,KAAM;AACrC","ignoreList":[]}