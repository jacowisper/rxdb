{"version":3,"file":"utils-base64.js","names":["encode","decode","b64EncodeUnicode","str","b64DecodeUnicode","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","btoa","base64ToArrayBuffer","base64","binary_string","atob","length","charCodeAt"],"sources":["../../../../src/plugins/utils/utils-base64.ts"],"sourcesContent":["\r\n/**\r\n * NO! We cannot just use btoa() and atob()\r\n * because they do not work correctly with binary data.\r\n * @link https://stackoverflow.com/q/30106476/3443137\r\n */\r\nimport { encode, decode } from 'js-base64';\r\n\r\n/**\r\n * atob() and btoa() do not work well with non ascii chars,\r\n * so we have to use these helper methods instead.\r\n * @link https://stackoverflow.com/a/30106551/3443137\r\n */\r\n// Encoding UTF8 -> base64\r\nexport function b64EncodeUnicode(str: string) {\r\n    return encode(str);\r\n}\r\n\r\n// Decoding base64 -> UTF8\r\nexport function b64DecodeUnicode(str: string) {\r\n    return decode(str);\r\n}\r\n\r\n/**\r\n * @link https://stackoverflow.com/a/9458996/3443137\r\n */\r\nexport function arrayBufferToBase64(buffer: ArrayBuffer) {\r\n    let binary = '';\r\n    const bytes = new Uint8Array(buffer);\r\n    const len = bytes.byteLength;\r\n    for (let i = 0; i < len; i++) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return btoa(binary);\r\n}\r\n\r\n\r\n/**\r\n * @link https://stackoverflow.com/a/21797381\r\n */\r\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\r\n    const binary_string = atob(base64);\r\n    const len = binary_string.length;\r\n    const bytes = new Uint8Array(len);\r\n    for (let i = 0; i < len; i++) {\r\n        bytes[i] = binary_string.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n}\r\n"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA,SAASA,MAAM,EAAEC,MAAM,QAAQ,WAAW;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAACC,GAAW,EAAE;EAC1C,OAAOH,MAAM,CAACG,GAAG,CAAC;AACtB;;AAEA;AACA,OAAO,SAASC,gBAAgBA,CAACD,GAAW,EAAE;EAC1C,OAAOF,MAAM,CAACE,GAAG,CAAC;AACtB;;AAEA;AACA;AACA;AACA,OAAO,SAASE,mBAAmBA,CAACC,MAAmB,EAAE;EACrD,IAAIC,MAAM,GAAG,EAAE;EACf,IAAMC,KAAK,GAAG,IAAIC,UAAU,CAACH,MAAM,CAAC;EACpC,IAAMI,GAAG,GAAGF,KAAK,CAACG,UAAU;EAC5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,GAAG,EAAEE,CAAC,EAAE,EAAE;IAC1BL,MAAM,IAAIM,MAAM,CAACC,YAAY,CAACN,KAAK,CAACI,CAAC,CAAC,CAAC;EAC3C;EACA,OAAOG,IAAI,CAACR,MAAM,CAAC;AACvB;;AAGA;AACA;AACA;AACA,OAAO,SAASS,mBAAmBA,CAACC,MAAc,EAAe;EAC7D,IAAMC,aAAa,GAAGC,IAAI,CAACF,MAAM,CAAC;EAClC,IAAMP,GAAG,GAAGQ,aAAa,CAACE,MAAM;EAChC,IAAMZ,KAAK,GAAG,IAAIC,UAAU,CAACC,GAAG,CAAC;EACjC,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,GAAG,EAAEE,CAAC,EAAE,EAAE;IAC1BJ,KAAK,CAACI,CAAC,CAAC,GAAGM,aAAa,CAACG,UAAU,CAACT,CAAC,CAAC;EAC1C;EACA,OAAOJ,KAAK,CAACF,MAAM;AACvB","ignoreList":[]}